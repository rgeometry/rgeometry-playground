<html>

<head>
  <meta charset="utf-8" />
  <title>Reanimate - viewer</title>
  <script src="https://unpkg.com/split-grid/dist/split-grid.js"></script>
  <script type="text/javascript" src="elm.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.0/codemirror.min.js"
    integrity="sha512-LwxFyHyqmDdcint8dhTSHeJuI+uH5r/vrcGkxH4QhHGP8SpNaS9MVa1BxZRNTb1GPyLBAWrjbWpZTPGgtDgJOw=="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.0/addon/mode/simple.min.js"
    integrity="sha512-E2znx1Q2jMyWOPTL+NhviQc4Ozv77S0CwmoGsgV/6kDaCWjETBvAnWe3CB/Llusmt0lrVNuuk2RcLHYubFKgrg=="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.61.0/mode/rust/rust.min.js"
    integrity="sha512-g3Nhw36S0p4ZJQcky87D5M+vZbFvLrgsHWYltUy5IW0zKbvi8GlPRjJSo2CyUyQiU01Ier7u+rBABDs3BawKyQ=="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
    crossorigin="anonymous"></script>

  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.56.0/codemirror.min.css"
    integrity="sha512-/BlxZbYLtYGExexketXsTi47eHp+r2kTeq2OHecQPZlfbc7WFXVrwbVW9HOYjI6c9Ti+P60ASmVLxittZ0EBGw=="
    crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
  <link rel="stylesheet" href="style.css">

  <script src="snippets.js"></script>
  <script src="playground.js"></script>
</head>

<body>
  <div class="grid">
    <div class="edit-box">
      <div id="editor"></div>
    </div>
    <div class="gutter-column-1"></div>
    <div class="edit-box">
      <div class="media-buttons column-header">
        <div style="display: flex;flex-flow:row;justify-content: space-between;">
          <div>
            <a href="https://rgeometry.org/"><img src="home-white-48dp.svg"></a>
            <img id="love" src="favorite_border-white-48dp.svg">
          </div>
          <div>
            <img id="examples" src="collections-white-48dp.svg">
            <img id="help" src="help_outline-white-48dp.svg">
          </div>
        </div>
      </div>
      <div id="elm"></div>
    </div>
  </div>

  <div id="love-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Support RGeometry</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body">
        <div class="content">
          <p>
            The playground server is generously funded by
            <a href="https://github.com/sponsors/Lemmih">❤ GitHub Sponsors ❤.</a>
          </p>
          <p>
            If rgeometry is useful for you, consider becoming a sponsor or boosting
            the project's visibility with a
            <a href="https://github.com/rgeometry/rgeometry/">GitHub Star.</a>
          </p>
          <iframe src="https://github.com/sponsors/Lemmih/card" title="Sponsor Lemmih" height="225" width="600"
            style="border: 0;"></iframe>
        </div>
      </section>
    </div>
    <button class="modal-close is-large" area-label="close"></button>
  </div>

  <div id="help-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Playground Instructions</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body">
        <div class="content">
          <dl>
            <dt><b>RGeometry API</b></dt>
            <dd>
              <a href="https://docs.rs/rgeometry/">
                https://docs.rs/rgeometry/
              </a>
            </dd>
            <dt><b>Playground API</b></dt>
            <dd>
              <a href="">
                TBD
              </a>
            </dd>
            <dt><b>Repository</b></dt>
            <dd>
              <a href="https://github.com/rgeometry/rgeometry/">
                github.com/rgeometry/rgeometry/
              </a>
            </dd>
          </dl>
          <p>
            <script>
              document.write('Playground version: ' + playgroundVersion);
            </script>
          </p>
        </div>
      </section>
      <!-- <footer class="modal-card-foot">
      </footer> -->
    </div>
    <button class="modal-close is-large" area-label="close"></button>
  </div>

  <div id="examples-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Reanimate Examples</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body">
        <div class="snippet-container">
          TBD
        </div>
      </section>
      <!-- <footer class="modal-card-foot">
      </footer> -->
    </div>
    <button class="modal-close is-large" area-label="close"></button>
  </div>

  <script type="text/javascript">
    var app = playgroundInit(document.getElementById('elm'));

    var myCodeMirror = CodeMirror(document.querySelector('#editor'), {
      lineNumbers: true,
      value: '',
      mode: "rust",
      lineWrapping: true
    });

    const params = new URLSearchParams(window.location.search);
    const code = params.get('code') || snippets[0].code;

    myCodeMirror.setValue(code);
    app.newCode(code);

    const mediaButtons = document.querySelector('.media-buttons');

    myCodeMirror.on('change', function () {
      app.newCode(myCodeMirror.getValue());
    });

    //renderSnippets(document.querySelector('.snippet-container'), myCodeMirror);

    const helpIcon = document.getElementById('help');
    const helpModal = document.querySelector('#help-modal');
    helpIcon.onclick = function () {
      openModal(helpModal);
    };
    configureModal(helpModal);

    const examplesIcon = document.getElementById('examples')
    const examplesModal = document.getElementById('examples-modal')
    examplesIcon.onclick = function () {
      openModal(examplesModal);
    };
    configureModal(examplesModal);

    const loveIcon = document.getElementById('love');
    const loveModal = document.querySelector('#love-modal');
    loveIcon.onclick = function () {
      openModal(loveModal);
    };
    configureModal(loveModal);

    Split({ // gutters specified in options
      columnGutters: [{
        track: 1,
        element: document.querySelector('.gutter-column-1'),
      }],
      onDragEnd: function () {
        myCodeMirror.refresh();
      }
    });
  </script>
</body>

</html>